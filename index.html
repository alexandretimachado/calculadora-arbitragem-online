<!DOCTYPE html>

<html lang="pt-BR">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Calculadora de Arbitragem</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">

    <style>

        :root {

            --primary: #4361ee;

            --primary-dark: #3a56d4;

            --secondary: #48bfe3;

            --success: #06d6a0;

            --danger: #ef476f;

            --warning: #ffd166;

            --light: #f8f9fa;

            --dark: #212529;

            --gray: #6c757d;

            --border: #dee2e6;

        }



        * {

            box-sizing: border-box;

            margin: 0;

            padding: 0;

        }



        body {

            font-family: 'Roboto', Arial, sans-serif;

            line-height: 1.6;

            color: var(--dark);

            background-color: #f5f7fa;

            padding: 0;

            margin: 0;

        }



        .container {

            max-width: 900px;

            margin: 0 auto;

            padding: 20px;

        }



        header {

            background-color: var(--primary);

            color: white;

            padding: 20px 0;

            margin-bottom: 30px;

            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);

        }



        header h1 {

            text-align: center;

            font-weight: 700;

            font-size: 2.2rem;

        }



        .card {

            background-color: white;

            border-radius: 8px;

            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);

            padding: 25px;

            margin-bottom: 25px;

        }



        .card-title {

            font-size: 1.4rem;

            font-weight: 500;

            margin-bottom: 20px;

            color: var(--primary);

            border-bottom: 2px solid var(--border);

            padding-bottom: 10px;

        }



        .form-group {

            margin-bottom: 20px;

        }



        label {

            display: block;

            margin-bottom: 8px;

            font-weight: 500;

            color: var(--dark);

        }



        input[type="number"],

        input[type="text"] {

            width: 100%;

            padding: 12px 15px;

            border: 1px solid var(--border);

            border-radius: 4px;

            font-size: 16px;

            transition: border-color 0.3s;

        }



        input[type="number"]:focus,

        input[type="text"]:focus {

            border-color: var(--primary);

            outline: none;

            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);

        }



        .odds-container {

            margin-bottom: 20px;

        }



        .odd-input {

            display: flex;

            gap: 15px;

            margin-bottom: 15px;

            align-items: center;

        }



        .odd-input .odd-number {

            flex: 1;

        }



        .odd-input .odd-desc {

            flex: 2;

        }



        .btn-container {

            display: flex;

            gap: 15px;

            margin-bottom: 25px;

        }



        .btn {

            padding: 12px 20px;

            border: none;

            border-radius: 4px;

            cursor: pointer;

            font-size: 16px;

            font-weight: 500;

            transition: all 0.2s;

        }



        .btn-primary {

            background-color: var(--primary);

            color: white;

        }



        .btn-primary:hover {

            background-color: var(--primary-dark);

        }



        .btn-secondary {

            background-color: var(--secondary);

            color: white;

        }



        .btn-secondary:hover {

            background-color: #3da8cc;

        }



        .resultado {

            background-color: white;

            border-radius: 8px;

            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);

            padding: 25px;

        }



        .resultado h3 {

            font-size: 1.4rem;

            margin-bottom: 15px;

            color: var(--primary);

            border-bottom: 2px solid var(--border);

            padding-bottom: 10px;

        }



        .resultado p {

            margin-bottom: 15px;

            line-height: 1.6;

        }



        .resultado .success {

            color: var(--success);

            font-weight: 500;

        }



        .resultado .danger {

            color: var(--danger);

            font-weight: 500;

        }



        .bet-result {

            background-color: var(--light);

            border-radius: 6px;

            padding: 15px;

            margin-bottom: 15px;

            border-left: 4px solid var(--primary);

        }



        .bet-result strong {

            display: block;

            margin-bottom: 8px;

            font-size: 1.1rem;

        }



        .probability-bar {

            height: 8px;

            background-color: #e9ecef;

            border-radius: 4px;

            margin: 10px 0 20px;

            overflow: hidden;

        }



        .probability-fill {

            height: 100%;

            background-color: var(--primary);

            border-radius: 4px;

            transition: width 0.5s ease-out;

        }



        @media (max-width: 768px) {

            .odd-input {

                flex-direction: column;

                gap: 10px;

            }

           

            .odd-input .odd-number,

            .odd-input .odd-desc {

                width: 100%;

            }

           

            .btn-container {

                flex-direction: column;

            }

        }



        .historico-item {

            border: 1px solid #ddd;

            padding: 15px;

            margin: 10px 0;

            border-radius: 5px;

        }

    </style>

</head>

<body>

    <header>

        <div class="container">

            <h1>Calculadora de Arbitragem</h1>

        </div>

    </header>



    <div class="container">

        <div class="card">

            <h2 class="card-title">Configurações</h2>

           

            <div class="form-group">

                <label for="valorTotal">Valor Total (R$):</label>

                <input type="number" id="valorTotal" step="0.01" min="0" placeholder="Digite o valor total a ser apostado">

            </div>



            <div class="odds-container" id="oddsContainer">

                <h3 class="card-title">Odds</h3>

                <div class="odd-input">

                    <div class="odd-number">

                        <label for="odd1">Odd 1:</label>

                        <input type="number" id="odd1" step="0.01" min="1" placeholder="Ex: 2.05" class="odd">

                    </div>

                    <div class="odd-desc">

                        <label for="desc1">Descrição:</label>

                        <input type="text" id="desc1" placeholder="Ex: Casa de apostas" class="desc">

                    </div>

                </div>

                <div class="odd-input">

                    <div class="odd-number">

                        <label for="odd2">Odd 2:</label>

                        <input type="number" id="odd2" step="0.01" min="1" placeholder="Ex: 1.95" class="odd">

                    </div>

                    <div class="odd-desc">

                        <label for="desc2">Descrição:</label>

                        <input type="text" id="desc2" placeholder="Ex: Casa de apostas" class="desc">

                    </div>

                </div>

            </div>



            <div class="btn-container">

                <button class="btn btn-secondary" onclick="adicionarOdd()">Adicionar mais uma odd</button>

                <button class="btn btn-primary" onclick="calcular()">Calcular</button>

                <button class="btn btn-primary" onclick="guardarCalculo()">Guardar</button>

            </div>

        </div>



        <div class="resultado card mt-4 mb-4" id="resultado">

          Resultados serão exibidos aqui

        </div>



        <div id="historico" class="card">

            <h3 class="card-title">Histórico</h3>

            <div id="historicoLista"></div>

        </div>

    </div>



    <script>

        function adicionarOdd() {

            const container = document.getElementById('oddsContainer');

            const oddInputs = container.querySelectorAll('.odd-input');

            const newIndex = oddInputs.length + 1;

           

            const div = document.createElement('div');

            div.className = 'odd-input';

            div.innerHTML = `

                <div class="odd-number">

                    <label for="odd${newIndex}">Odd ${newIndex}:</label>

                    <input type="number" id="odd${newIndex}" step="0.01" min="1" placeholder="Ex: 2.00" class="odd">

                </div>

                <div class="odd-desc">

                    <label for="desc${newIndex}">Descrição:</label>

                    <input type="text" id="desc${newIndex}" placeholder="Ex: Casa de apostas" class="desc">

                </div>

            `;

            container.appendChild(div);

        }



        function calcular() {

            const valorTotal = parseFloat(document.getElementById('valorTotal').value);

            const odds = Array.from(document.getElementsByClassName('odd'))

                .map(input => parseFloat(input.value))

                .filter(odd => !isNaN(odd));

            const descricoes = Array.from(document.getElementsByClassName('desc'))

                .map((input, index) => input.value || `Aposta ${index + 1}`);



            if (odds.length < 2 || isNaN(valorTotal)) {

                alert('Por favor, preencha pelo menos duas odds e o valor total');

                return;

            }



            const probabilidades = odds.map(odd => 1 / odd);

            const somaProbabilidades = probabilidades.reduce((a, b) => a + b, 0);

            const isArbitragem = somaProbabilidades < 1;

            const percentProbability = (somaProbabilidades * 100).toFixed(2);



            let resultado = `

                <h3>Resultado da Análise</h3>

                <div class="probability-bar">

                    <div class="probability-fill" style="width: ${Math.min(percentProbability, 100)}%"></div>

                </div>

                <p>Soma das probabilidades: <strong>${percentProbability}%</strong></p>

            `;

           

            resultado += isArbitragem ?

                '<p class="success">✅ Oportunidade de arbitragem encontrada!</p>' :

                '<p class="danger">❌ Não há oportunidade de arbitragem.</p>';



            resultado += '<h3>Distribuição de Apostas</h3>';



            odds.forEach((odd, i) => {

                const valor = (valorTotal * probabilidades[i] / somaProbabilidades).toFixed(2);

                const retorno = (valor * odd).toFixed(2);

                const lucro = (retorno - valorTotal).toFixed(2);

               

                resultado += `

                    <div class="bet-result">

                        <strong>${descricoes[i]}</strong>

                        <p>Odd: ${odd.toFixed(2)}</p>

                        <p>Apostar: R$ ${valor}</p>

                        <p>Retorno possível: R$ ${retorno}</p>

                        <p>Lucro potencial: R$ ${lucro}</p>

                    </div>

                `;

            });



            document.getElementById('resultado').innerHTML = resultado;

           

            // Animar a barra de probabilidade

            setTimeout(() => {

                const bar = document.querySelector('.probability-fill');

                if (bar) {

                    bar.style.width = `${Math.min(percentProbability, 100)}%`;

                }

            }, 100);

        }



        function guardarCalculo() {

            const valorTotal = parseFloat(document.getElementById('valorTotal').value);

            const odds = Array.from(document.getElementsByClassName('odd'))

                .map(input => parseFloat(input.value))

                .filter(odd => !isNaN(odd));

            const descricoes = Array.from(document.getElementsByClassName('desc'))

                .map(input => input.value || `Aposta ${odds.indexOf(parseFloat(input.previousElementSibling.value)) + 1}`);



            if (odds.length < 2 || isNaN(valorTotal)) {

                alert('Por favor, calcule primeiro antes de guardar');

                return;

            }



            const calculo = {

                data: new Date().toLocaleString(),

                valorTotal,

                odds,

                descricoes,

                resultado: document.getElementById('resultado').innerHTML

            };



            // Pegar histórico existente ou criar novo array

            let historico = JSON.parse(localStorage.getItem('historicoArbitragem') || '[]');

            historico.unshift(calculo); // Adiciona no início do array

            localStorage.setItem('historicoArbitragem', JSON.stringify(historico));



            atualizarHistorico();

        }



        function atualizarHistorico() {

            const historico = JSON.parse(localStorage.getItem('historicoArbitragem') || '[]');

            const historicoDiv = document.getElementById('historicoLista');

           

            historicoDiv.innerHTML = historico.map((calculo, index) => `

                <div class="historico-item">

                    <h4>Cálculo ${index + 1} - ${calculo.data}</h4>

                    <p>Valor Total: R$ ${calculo.valorTotal}</p>

                    <p>Odds: ${calculo.odds.join(', ')}</p>

                    <p>Descrições: ${calculo.descricoes.join(', ')}</p>

                    <button class="btn btn-primary" onclick="deletarDoHistorico(${index})">Deletar</button>

            `).join('');

        }



        function deletarDoHistorico(index) {

            let historico = JSON.parse(localStorage.getItem('historicoArbitragem') || '[]');

            historico.splice(index, 1);

            localStorage.setItem('historicoArbitragem', JSON.stringify(historico));

            atualizarHistorico();

        }



        function exportarParaArquivo(index) {

            const historico = JSON.parse(localStorage.getItem('historicoArbitragem') || '[]');

            const calculo = historico[index];

           

            const conteudo = `

Cálculo de Arbitragem - ${calculo.data}

Valor Total: R$ ${calculo.valorTotal}

Odds: ${calculo.odds.join(', ')}

Descrições: ${calculo.descricoes.join(', ')}

            `;



            const blob = new Blob([conteudo], { type: 'text/plain' });

            const url = window.URL.createObjectURL(blob);

            const a = document.createElement('a');

            a.href = url;

            a.download = `arbitragem-${calculo.data.replace(/[/:\\]/g, '-')}.txt`;

            a.click();

            window.URL.revokeObjectURL(url);

        }



        // Carregar histórico ao iniciar a página

        window.onload = atualizarHistorico;

    </script>

</body>

</html>
